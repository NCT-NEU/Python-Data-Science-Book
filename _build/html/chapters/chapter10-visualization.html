
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>10. Trực quan hóa dữ liệu &#8212; Khoa học dữ liệu trong Kinh tế và Kinh doanh</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/chapter10-visualization';</script>
    <link rel="canonical" href="https://www.tomasbeuzen.com/python-programming-for-data-science/chapters/chapter10-visualization.html" />
    <link rel="icon" href="../_static/favicon2.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Chương: Tổng quan về xây dựng mô hình trên dữ liệu" href="chapter11-IntroML.html" />
    <link rel="prev" title="Chương 9: Sắp xếp và biến đổi dữ liệu" href="chapter9-transform.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Khoa học dữ liệu trong Kinh tế và Kinh doanh - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Khoa học dữ liệu trong Kinh tế và Kinh doanh - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Khoa học dữ liệu trong Kinh tế và Kinh doanh
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Chapters</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="gioi-thieu-ve-khoa-hoc-du-lieu.html">Chương 1: Các khái niệm cơ bản trong khoa học dữ liệu</a></li>

<li class="toctree-l1"><a class="reference internal" href="nguyen-ly-phan-tich-du-lieu.html">Chương 2: Nguyên lý của phân tích dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="khung-phuong-phap-xay-dung-mo-hinh.html">Chương 3: Khung phương pháp luận trong xây dựng mô hình</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter4-basics.html">Chương 4: Python cơ bản</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter5-Numpy.html">Chương 5: Kiến thức cơ bản về NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter6-pandas.html">Chương 6: Giới thiệu về <code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter7-Import-data.html">Chương 7: Nhập và lưu trữ dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter8-prepare.html">Chương 8: Làm sạch và chuẩn bị dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter9-transform.html">Chương 9: Sắp xếp và biến đổi dữ liệu</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">10. Trực quan hóa dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter11-IntroML.html">Chương: Tổng quan về xây dựng mô hình trên dữ liệu</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter12-Supervised.html">Chương 12: Các mô hình học máy có giám sát</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter13-Unsupervised.html">Chương 13: Học máy không giám sát</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Practice Exercises</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter1-basics-practice.html">Python Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter2-loops-functions-practice.html">Loops &amp; Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter3-tests-classes-practice.html">Unit Tests &amp; Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter4-style-scripts-imports-practice.html">Style Guides, Scripts, Imports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter5-numpy-practice.html">NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter7-pandas-practice.html">Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter8-wrangling-basics-practice.html">Basic Wrangling With Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practice-exercises/chapter9-wrangling-advanced-practice.html">Advanced Wrangling With Pandas</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/TomasBeuzen/python-programming-for-data-science" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/chapter10-visualization.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>10. Trực quan hóa dữ liệu</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#so-luoc-ve-matplotlib">10.1 Sơ lược về matplotlib</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dieu-chinh-khoang-cach-xung-quanh-cac-subplot">Điều chỉnh khoảng cách xung quanh các subplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colors-mau-sac-markers-diem-danh-dau-va-line-styles-kieu-duong">Colors (Màu sắc), Markers (Điểm đánh dấu), và Line Styles (Kiểu đường)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ticks-vach-chia-labels-nhan-va-legends-chu-giai">Ticks (Vạch chia), Labels (Nhãn), và Legends (Chú giải)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dat-tieu-de-nhan-truc-vach-chia-va-nhan-vach-chia">Đặt tiêu đề, nhãn trục, vạch chia và nhãn vạch chia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#them-chu-giai">Thêm chú giải</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#annotations-chu-thich-va-drawing-ve-tren-mot-subplot">Annotations (Chú thích) và Drawing (Vẽ) trên một Subplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-plots-to-file-luu-do-thi-ra-tep">Saving Plots to File (Lưu đồ thị ra tệp)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-configuration-cau-hinh-matplotlib">matplotlib Configuration (Cấu hình matplotlib)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ve-do-thi-voi-pandas-va-seaborn">9.2 Vẽ đồ thị với pandas và seaborn</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#line-plots-do-thi-duong">Line Plots (Đồ thị đường)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bar-plots-do-thi-cot">Bar Plots (Đồ thị cột)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#histograms-bieu-do-tan-suat-va-density-plots-do-thi-mat-do">Histograms (Biểu đồ tần suất) và Density Plots (Đồ thị mật độ)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scatter-or-point-plots-do-thi-diem-hoac-phan-tan">Scatter or Point Plots (Đồ thị điểm hoặc phân tán)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#facet-grids-luoi-da-dien-va-categorical-data-du-lieu-phan-loai">Facet Grids (Lưới đa diện) và Categorical Data (Dữ liệu phân loại)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cac-cong-cu-truc-quan-hoa-python-khac">9.3 Các Công cụ Trực quan hóa Python Khác</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ket-luan">9.4 Kết luận</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="truc-quan-hoa-du-lieu">
<h1>10. Trực quan hóa dữ liệu<a class="headerlink" href="#truc-quan-hoa-du-lieu" title="Link to this heading">#</a></h1>
<hr><p>Việc tạo ra các hình ảnh trực quan chứa đựng thông tin, thường được gọi là đồ thị, là một trong những nhiệm vụ quan trọng nhất trong phân tích dữ liệu. Trực quan hóa có thể đóng vai trò là một phần của quá trình khám phá dữ liệu – ví dụ, nhằm xác định các điểm ngoại lai hoặc gợi ý những phép biến đổi cần thiết cho dữ liệu đầu vào, hoặc đơn giản là nhằm tìm kiếm ý tưởng cho việc xây dựng mô hình phân tích. Trong một số tình huống khác, mục tiêu cuối cùng có thể là xây dựng một hình ảnh trực quan có tính tương tác để trình bày trên nền tảng web.</p>
<p>Python cung cấp nhiều thư viện hỗ trợ trực quan hóa dữ liệu, cả dưới dạng biểu đồ tĩnh lẫn biểu đồ động. Tuy nhiên, trong phạm vi cuốn sách này, chúng ta sẽ tập trung chủ yếu vào thư viện <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> và các thư viện được xây dựng trên nền tảng của nó.</p>
<p><strong>matplotlib</strong> là một thư viện phần mềm vẽ đồ thị trên máy tính để bàn, được thiết kế để tạo ra các biểu đồ chất lượng cao phù hợp cho việc công bố và in ấn. Dự án này được khởi xướng bởi John Hunter vào năm 2002 với mục tiêu xây dựng một giao diện vẽ đồ thị tương tự như MATLAB trong ngôn ngữ Python. Nhờ sự hợp tác chặt chẽ giữa cộng đồng phát triển matplotlib và IPython, việc tạo ra các biểu đồ tương tác từ môi trường IPython shell, và hiện nay là Jupyter notebook, đã trở nên dễ dàng hơn rất nhiều.</p>
<p>matplotlib hỗ trợ nhiều giao diện người dùng trên tất cả các hệ điều hành chính, và cho phép xuất đồ thị sang nhiều định dạng đồ họa phổ biến, cả dạng vector và raster, bao gồm: PDF, SVG, JPG, PNG, BMP, GIF, v.v.. Ngoại trừ một số sơ đồ minh họa đặc biệt, hầu hết các biểu đồ trong cuốn sách này đều được tạo bằng matplotlib.</p>
<p>Theo thời gian, matplotlib đã trở thành nền tảng cho nhiều thư viện bổ trợ khác nhằm mở rộng khả năng trực quan hóa. Một trong những thư viện nổi bật đó là <code class="docutils literal notranslate"><span class="pre">seaborn</span></code>, mà chúng ta sẽ khám phá trong phần sau của chương này.</p>
<p>Cách đơn giản nhất để theo dõi các ví dụ minh họa trong chương là hiển thị đồ thị ngay trong Jupyter notebook. Để thực hiện điều đó, hãy chạy lệnh sau trong một ô của notebook:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<p><strong>Lưu ý</strong></p>
<p>Nhiều thư viện trực quan hóa dữ liệu tận dụng công nghệ web hiện đại để tạo ra các hình ảnh trực quan tương tác tích hợp tốt với Jupyter notebook. Thay vì sử dụng nhiều công cụ trực quan hóa trong cuốn sách này, chúng tôi quyết định gắn bó với matplotlib để dạy các nguyên tắc cơ bản, đặc biệt là vì pandas có tích hợp tốt với matplotlib. Bạn cũng có thể điều chỉnh các nguyên tắc từ chương này để học cách sử dụng các thư viện trực quan hóa khác.</p>
<section id="so-luoc-ve-matplotlib">
<h2>10.1 Sơ lược về matplotlib<a class="headerlink" href="#so-luoc-ve-matplotlib" title="Link to this heading">#</a></h2>
<hr><p>Với matplotlib, chúng ta sử dụng quy ước import sau:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>Sau khi chạy <code class="docutils literal notranslate"><span class="pre">%matplotlib</span> <span class="pre">notebook</span></code> trong Jupyter (hoặc đơn giản là <code class="docutils literal notranslate"><span class="pre">%matplotlib</span></code> trong IPython), chúng ta có thể thử tạo một đồ thị đơn giản. Nếu mọi thứ được thiết lập đúng, một đồ thị đường như <em>Đồ thị đường đơn giản</em> sẽ xuất hiện:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,
       17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,
       34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50,
       51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67,
       68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84,
       85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x1d348379590&gt;]
</pre></div>
</div>
<img alt="../_images/03a15798199f15bc9646a606b48cc98375fbe8d563c6034fc362425137946091.png" src="../_images/03a15798199f15bc9646a606b48cc98375fbe8d563c6034fc362425137946091.png" />
</div>
</div>
<p>Trong khi các thư viện như <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> và các hàm vẽ đồ thị tích hợp sẵn của pandas sẽ xử lý nhiều chi tiết thông thường của việc tạo đồ thị, nếu bạn muốn tùy chỉnh chúng vượt ra ngoài các tùy chọn hàm được cung cấp, bạn sẽ cần học một chút về API matplotlib.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Hình (figures) và đồ thị con (subplots)</span>
<span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre></div>
</div>
</div>
</div>
<p>Các đồ thị trong <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> nằm trong một đối tượng <code class="docutils literal notranslate"><span class="pre">Figure</span></code>. Bạn có thể tạo một hình mới bằng <code class="docutils literal notranslate"><span class="pre">plt.figure</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 0 Axes&gt;
</pre></div>
</div>
</div>
</div>
<p>Trong IPython, nếu bạn chạy <code class="docutils literal notranslate"><span class="pre">%matplotlib</span></code> trước để thiết lập tích hợp matplotlib, một cửa sổ đồ thị trống sẽ xuất hiện, nhưng trong Jupyter sẽ không có gì được hiển thị cho đến khi chúng ta sử dụng thêm một vài lệnh.</p>
<p><code class="docutils literal notranslate"><span class="pre">plt.figure</span></code> có một số tùy chọn; đáng chú ý, <code class="docutils literal notranslate"><span class="pre">figsize</span></code> sẽ đảm bảo hình có kích thước và tỷ lệ khung hình nhất định nếu được lưu vào đĩa.</p>
<p>Bạn không thể tạo một đồ thị với một hình trống. Bạn phải tạo một hoặc nhiều subplot bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">add_subplot</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Điều này có nghĩa là tạo ra khung hình 2 × 2 (tức là tối đa bốn đồ thị), và chúng ta đang chọn subplot đầu tiên trong số bốn subplot (được đánh số từ 1). Nếu bạn tạo hai subplot tiếp theo, bạn sẽ có một hình trực quan trông giống như <em>Một hình matplotlib trống với ba subplot</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span> <span class="c1"># Phải tạo lại fig vì cell trước có thể đã được thực thi riêng</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># Để hiển thị hình</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/2beefdc35592575ddeed3662fa0037690fa2ccee07e920e06e72571a2c762b21.png" src="../_images/2beefdc35592575ddeed3662fa0037690fa2ccee07e920e06e72571a2c762b21.png" />
</div>
</div>
<p><strong>Lưu ý</strong></p>
<p>Khi sử dụng Jupyter notebooks là các đồ thị được đặt lại sau mỗi ô, vì vậy bạn phải đặt tất cả các lệnh vẽ đồ thị vào một ô notebook duy nhất.</p>
<p>Ở trên chúng ta đã chạy tất cả các lệnh này trong cùng một ô:</p>
<p>Các đối tượng trục đồ thị này có nhiều phương thức khác nhau để tạo ra các loại đồ thị khác nhau, và ưu tiên sử dụng các phương thức trục hơn là các hàm vẽ đồ thị cấp cao nhất như <code class="docutils literal notranslate"><span class="pre">plt.plot</span></code>. Ví dụ, chúng ta có thể tạo một đồ thị dạng đường bằng phương thức <code class="docutils literal notranslate"><span class="pre">plot</span></code> (xem <em>Trực quan hóa dữ liệu sau một đồ thị đơn</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c655d9503b8f5191f3da2393f0a8def10008a87d9d4c6dbf11ebfa126ac18c79.png" src="../_images/c655d9503b8f5191f3da2393f0a8def10008a87d9d4c6dbf11ebfa126ac18c79.png" />
</div>
</div>
<p>Bạn có thể nhận thấy kết quả như <code class="docutils literal notranslate"><span class="pre">&lt;matplotlib.lines.Line2D</span> <span class="pre">at</span> <span class="pre">...&gt;</span></code> khi bạn chạy lệnh này. matplotlib trả về các đối tượng tham chiếu đến thành phần phụ của đồ thị vừa được thêm vào. Phần lớn thời gian bạn có thể bỏ qua kết quả này một cách an toàn, hoặc bạn có thể đặt dấu chấm phẩy ở cuối dòng để chặn kết quả.</p>
<p>Các tùy chọn bổ sung hướng dẫn matplotlib vẽ một đường gạch ngang màu đen. Các đối tượng được trả về bởi <code class="docutils literal notranslate"><span class="pre">fig.add_subplot</span></code> ở đây là các đối tượng <code class="docutils literal notranslate"><span class="pre">AxesSubplot</span></code>, trên đó bạn có thể vẽ trực tiếp trên các subplot trống khác bằng cách gọi phương thức instance của mỗi subplot (xem <em>Trực quan hóa dữ liệu sau các đồ thị bổ sung</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">);</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">30</span><span class="p">));</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/229b9e75680d0633056e5ec64d5df27ed449e3edce5f7421b5dad2975b39eb70.png" src="../_images/229b9e75680d0633056e5ec64d5df27ed449e3edce5f7421b5dad2975b39eb70.png" />
</div>
</div>
<p>Tùy chọn <code class="docutils literal notranslate"><span class="pre">alpha=0.3</span></code> đặt độ trong suốt của đồ thị được phủ lên.</p>
<p>Bạn có thể tìm thấy một danh mục toàn diện các loại đồ thị trong tài liệu matplotlib.</p>
<p>Để tạo một lưới các subplot thuận tiện hơn, matplotlib bao gồm một phương thức <code class="docutils literal notranslate"><span class="pre">plt.subplots</span></code> tạo một hình mới và trả về một mảng NumPy chứa các đối tượng subplot đã tạo:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">axes</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c08113d19cd09f564c7b39b258d9a8564bf70bb85ec03e13813a13479c3d1323.png" src="../_images/c08113d19cd09f564c7b39b258d9a8564bf70bb85ec03e13813a13479c3d1323.png" />
</div>
</div>
<p>Mảng <code class="docutils literal notranslate"><span class="pre">axes</span></code> sau đó có thể được lập chỉ mục giống như một mảng hai chiều; ví dụ, <code class="docutils literal notranslate"><span class="pre">axes[0,</span> <span class="pre">1]</span></code> tham chiếu đến subplot ở hàng trên cùng ở giữa. Bạn cũng có thể chỉ ra rằng các subplot nên có cùng trục x hoặc y tương ứng bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">sharex</span></code> và <code class="docutils literal notranslate"><span class="pre">sharey</span></code>. Điều này có thể hữu ích khi bạn đang so sánh dữ liệu trên cùng một thang đo; nếu không, matplotlib sẽ tự động điều chỉnh giới hạn đồ thị một cách độc lập. Xem <em>Bảng 9.1</em> để biết thêm về phương thức này.</p>
<p><strong>Bảng 9.1: Các tùy chọn matplotlib.pyplot.subplots</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Đối số</p></th>
<th class="head"><p>Mô tả</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nrows</span></code></p></td>
<td><p>Số hàng của các subplot</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ncols</span></code></p></td>
<td><p>Số cột của các subplot</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sharex</span></code></p></td>
<td><p>Tất cả các subplot nên sử dụng cùng một vạch chia trục x (điều chỉnh <code class="docutils literal notranslate"><span class="pre">xlim</span></code> sẽ ảnh hưởng đến tất cả các subplot)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sharey</span></code></p></td>
<td><p>Tất cả các subplot nên sử dụng cùng một vạch chia trục y (điều chỉnh <code class="docutils literal notranslate"><span class="pre">ylim</span></code> sẽ ảnh hưởng đến tất cả các subplot)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subplot_kw</span></code></p></td>
<td><p>Từ điển các từ khóa được truyền cho lệnh gọi <code class="docutils literal notranslate"><span class="pre">add_subplot</span></code> được sử dụng để tạo mỗi subplot</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">**fig_kw</span></code></p></td>
<td><p>Các từ khóa bổ sung cho <code class="docutils literal notranslate"><span class="pre">subplots</span></code> được sử dụng khi tạo hình, chẳng hạn như <code class="docutils literal notranslate"><span class="pre">plt.subplots(2,</span> <span class="pre">2,</span> <span class="pre">figsize=(8,</span> <span class="pre">6))</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<section id="dieu-chinh-khoang-cach-xung-quanh-cac-subplot">
<h3>Điều chỉnh khoảng cách xung quanh các subplot<a class="headerlink" href="#dieu-chinh-khoang-cach-xung-quanh-cac-subplot" title="Link to this heading">#</a></h3>
<p>Theo mặc định, matplotlib để lại một khoảng đệm nhất định xung quanh bên ngoài các subplot và khoảng cách giữa các subplot. Khoảng cách này đều được chỉ định tương đối với chiều cao và chiều rộng của đồ thị, do đó nếu bạn thay đổi kích thước đồ thị theo chương trình hoặc thủ công bằng cửa sổ GUI, đồ thị sẽ tự động điều chỉnh. Bạn có thể thay đổi khoảng cách bằng phương thức <code class="docutils literal notranslate"><span class="pre">subplots_adjust</span></code> trên các đối tượng <code class="docutils literal notranslate"><span class="pre">Figure</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">subplots_adjust(left=None,</span> <span class="pre">bottom=None,</span> <span class="pre">right=None,</span> <span class="pre">top=None,</span> <span class="pre">wspace=None,</span> <span class="pre">hspace=None)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">wspace</span></code> và <code class="docutils literal notranslate"><span class="pre">hspace</span></code> kiểm soát phần trăm chiều rộng và chiều cao của hình, tương ứng, để sử dụng làm khoảng cách giữa các subplot. Đây là một ví dụ nhỏ bạn có thể thực thi trong Jupyter, nơi tôi thu nhỏ khoảng cách xuống bằng không (xem <em>Trực quan hóa dữ liệu không có khoảng cách giữa các subplot</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Bạn có thể nhận thấy rằng các nhãn trục chồng chéo lên nhau. matplotlib không kiểm tra xem các nhãn có chồng chéo hay không, vì vậy trong trường hợp như thế này, bạn sẽ cần tự sửa các nhãn bằng cách chỉ định các vị trí vạch chia và nhãn vạch chia rõ ràng (chúng ta sẽ xem xét cách thực hiện điều này trong phần sau <em>Vạch chia, Nhãn và Chú giải</em>).</p>
</section>
<section id="colors-mau-sac-markers-diem-danh-dau-va-line-styles-kieu-duong">
<h3>Colors (Màu sắc), Markers (Điểm đánh dấu), và Line Styles (Kiểu đường)<a class="headerlink" href="#colors-mau-sac-markers-diem-danh-dau-va-line-styles-kieu-duong" title="Link to this heading">#</a></h3>
<p>Hàm vẽ đồ thị đường của matplotlib chấp nhận các mảng tọa độ x và y và các tùy chọn tạo kiểu màu tùy chọn. Ví dụ, để vẽ x so với y bằng các đường gạch ngang màu xanh lá cây, bạn sẽ thực thi:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Giả sử x và y đã được định nghĩa</span>
<span class="c1"># x = np.arange(0, 10, 0.1)</span>
<span class="c1"># y = np.sin(x)</span>
<span class="c1"># fig, ax = plt.subplots()</span>
<span class="c1"># ax.plot(x, y, linestyle=&quot;--&quot;, color=&quot;green&quot;)</span>
<span class="c1"># plt.show() </span>
<span class="c1"># Đoạn code trên là ví dụ, không có trong văn bản gốc để tạo hình, chỉ là mô tả lệnh</span>
</pre></div>
</div>
</div>
</div>
<p>Một số tên màu được cung cấp cho các màu thường được sử dụng, nhưng bạn có thể sử dụng bất kỳ màu nào trên phổ màu bằng cách chỉ định mã hex của nó (ví dụ: <code class="docutils literal notranslate"><span class="pre">&quot;#CECECE&quot;</span></code>). Bạn có thể xem một số kiểu đường được hỗ trợ bằng cách xem docstring cho <code class="docutils literal notranslate"><span class="pre">plt.plot</span></code> (sử dụng <code class="docutils literal notranslate"><span class="pre">plt.plot?</span></code> trong IPython hoặc Jupyter). Một tài liệu tham khảo toàn diện hơn có sẵn trong tài liệu trực tuyến.</p>
<p>Các đồ thị đường có thể có thêm các điểm đánh dấu để làm nổi bật các điểm dữ liệu thực tế. Vì hàm <code class="docutils literal notranslate"><span class="pre">plot</span></code> của matplotlib tạo ra một đồ thị đường liên tục, nội suy giữa các điểm, đôi khi có thể không rõ ràng vị trí các điểm nằm ở đâu. Điểm đánh dấu có thể được cung cấp dưới dạng một tùy chọn tạo kiểu bổ sung (xem <em>Đồ thị đường với các điểm đánh dấu</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span> <span class="c1"># Cần tạo figure mới</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Đối với các đồ thị đường, bạn sẽ nhận thấy rằng các điểm tiếp theo được nội suy tuyến tính theo mặc định. Điều này có thể được thay đổi bằng tùy chọn <code class="docutils literal notranslate"><span class="pre">drawstyle</span></code> (xem <em>Đồ thị đường với các tùy chọn drawstyle khác nhau</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Default&quot;</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="n">drawstyle</span><span class="o">=</span><span class="s2">&quot;steps-post&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;steps-post&quot;</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Ở đây, vì chúng ta đã truyền các đối số <code class="docutils literal notranslate"><span class="pre">label</span></code> cho <code class="docutils literal notranslate"><span class="pre">plot</span></code>, chúng ta có thể tạo một chú giải đồ thị để xác định mỗi dòng bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">ax.legend</span></code>. Tôi sẽ thảo luận thêm về chú giải trong <em>Vạch chia, Nhãn và Chú giải</em>.</p>
<p><strong>Lưu ý</strong></p>
<p>Bạn phải gọi <code class="docutils literal notranslate"><span class="pre">ax.legend</span></code> để tạo chú giải, cho dù bạn có truyền các tùy chọn <code class="docutils literal notranslate"><span class="pre">label</span></code> khi vẽ dữ liệu hay không.</p>
</section>
<section id="ticks-vach-chia-labels-nhan-va-legends-chu-giai">
<h3>Ticks (Vạch chia), Labels (Nhãn), và Legends (Chú giải)<a class="headerlink" href="#ticks-vach-chia-labels-nhan-va-legends-chu-giai" title="Link to this heading">#</a></h3>
<p>Hầu hết các loại trang trí đồ thị có thể được truy cập thông qua các phương thức trên các đối tượng trục matplotlib. Điều này bao gồm các phương thức như <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, <code class="docutils literal notranslate"><span class="pre">xticks</span></code>, và <code class="docutils literal notranslate"><span class="pre">xticklabels</span></code>. Chúng kiểm soát phạm vi đồ thị, vị trí vạch chia và nhãn vạch chia, tương ứng. Chúng có thể được sử dụng theo hai cách:</p>
<ul class="simple">
<li><p>Gọi không có đối số trả về giá trị tham số hiện tại (ví dụ: <code class="docutils literal notranslate"><span class="pre">ax.xlim()</span></code> trả về phạm vi vẽ trục x hiện tại)</p></li>
<li><p>Gọi với các tham số đặt giá trị tham số (ví dụ: <code class="docutils literal notranslate"><span class="pre">ax.xlim([0,</span> <span class="pre">10])</span></code> đặt phạm vi trục x thành 0 đến 10)</p></li>
</ul>
<p>Tất cả các phương thức như vậy đều hoạt động trên <code class="docutils literal notranslate"><span class="pre">AxesSubplot</span></code> đang hoạt động hoặc được tạo gần đây nhất. Mỗi phương thức tương ứng với hai phương thức trên chính đối tượng subplot; trong trường hợp <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, đó là <code class="docutils literal notranslate"><span class="pre">ax.get_xlim</span></code> và <code class="docutils literal notranslate"><span class="pre">ax.set_xlim</span></code>.</p>
<section id="dat-tieu-de-nhan-truc-vach-chia-va-nhan-vach-chia">
<h4>Đặt tiêu đề, nhãn trục, vạch chia và nhãn vạch chia<a class="headerlink" href="#dat-tieu-de-nhan-truc-vach-chia-va-nhan-vach-chia" title="Link to this heading">#</a></h4>
<p>Để minh họa việc tùy chỉnh các trục, tôi sẽ tạo một hình đơn giản và đồ thị của một bước đi ngẫu nhiên (xem <em>Đồ thị đơn giản để minh họa xticks (với nhãn mặc định)</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">());</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Để thay đổi các vạch chia trục x, cách dễ nhất là sử dụng <code class="docutils literal notranslate"><span class="pre">set_xticks</span></code> và <code class="docutils literal notranslate"><span class="pre">set_xticklabels</span></code>. Lệnh đầu tiên hướng dẫn matplotlib đặt các vạch chia ở đâu dọc theo phạm vi dữ liệu; theo mặc định, các vị trí này cũng sẽ là các nhãn. Nhưng chúng ta có thể đặt bất kỳ giá trị nào khác làm nhãn bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">set_xticklabels</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">());</span>

<span class="n">ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">750</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="s2">&quot;five&quot;</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Tùy chọn <code class="docutils literal notranslate"><span class="pre">rotation</span></code> đặt các nhãn vạch chia x ở một góc xoay 30 độ. Cuối cùng, <code class="docutils literal notranslate"><span class="pre">set_xlabel</span></code> đặt tên cho trục x và <code class="docutils literal notranslate"><span class="pre">set_title</span></code> là tiêu đề subplot (xem <em>Đồ thị đơn giản để minh họa xticks tùy chỉnh</em> cho hình kết quả):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">());</span>

<span class="n">ticks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">750</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="s2">&quot;five&quot;</span><span class="p">],</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Stages&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;My first matplotlib plot&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Việc sửa đổi trục y bao gồm quy trình tương tự, thay thế y bằng x trong ví dụ này. Lớp <code class="docutils literal notranslate"><span class="pre">axes</span></code> có một phương thức <code class="docutils literal notranslate"><span class="pre">set</span></code> cho phép đặt hàng loạt các thuộc tính đồ thị. Từ ví dụ trước, chúng ta cũng có thể viết:</p>
<p><code class="docutils literal notranslate"><span class="pre">ax.set(title=&quot;My</span> <span class="pre">first</span> <span class="pre">matplotlib</span> <span class="pre">plot&quot;,</span> <span class="pre">xlabel=&quot;Stages&quot;)</span></code></p>
</section>
<section id="them-chu-giai">
<h4>Thêm chú giải<a class="headerlink" href="#them-chu-giai" title="Link to this heading">#</a></h4>
<p>Chú giải là một yếu tố quan trọng khác để xác định các yếu tố đồ thị. Có một vài cách để thêm một chú giải. Cách dễ nhất là truyền đối số <code class="docutils literal notranslate"><span class="pre">label</span></code> khi thêm mỗi phần của đồ thị:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;one&quot;</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;two&quot;</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dotted&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;three&quot;</span><span class="p">);</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Phương thức <code class="docutils literal notranslate"><span class="pre">legend</span></code> có một số lựa chọn khác cho đối số vị trí <code class="docutils literal notranslate"><span class="pre">loc</span></code>. Xem docstring (với <code class="docutils literal notranslate"><span class="pre">ax.legend?</span></code>) để biết thêm thông tin.</p>
<p>Tùy chọn <code class="docutils literal notranslate"><span class="pre">loc</span></code> của chú giải cho matplotlib biết vị trí đặt đồ thị. Mặc định là <code class="docutils literal notranslate"><span class="pre">&quot;best&quot;</span></code>, cố gắng chọn một vị trí ít bị cản trở nhất. Để loại trừ một hoặc nhiều yếu tố khỏi chú giải, không truyền <code class="docutils literal notranslate"><span class="pre">label</span></code> hoặc truyền <code class="docutils literal notranslate"><span class="pre">label=&quot;_nolegend_&quot;</span></code>.</p>
</section>
</section>
<section id="annotations-chu-thich-va-drawing-ve-tren-mot-subplot">
<h3>Annotations (Chú thích) và Drawing (Vẽ) trên một Subplot<a class="headerlink" href="#annotations-chu-thich-va-drawing-ve-tren-mot-subplot" title="Link to this heading">#</a></h3>
<p>Ngoài các loại đồ thị tiêu chuẩn, bạn có thể muốn vẽ các chú thích đồ thị của riêng mình, có thể bao gồm văn bản, mũi tên hoặc các hình dạng khác. Bạn có thể thêm chú thích và văn bản bằng các hàm <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">arrow</span></code>, và <code class="docutils literal notranslate"><span class="pre">annotate</span></code>. <code class="docutils literal notranslate"><span class="pre">text</span></code> vẽ văn bản tại các tọa độ (x, y) đã cho trên đồ thị với kiểu tùy chỉnh tùy chọn:</p>
<p><code class="docutils literal notranslate"><span class="pre">ax.text(x,</span> <span class="pre">y,</span> <span class="pre">&quot;Hello</span> <span class="pre">world!&quot;,</span> <span class="pre">family=&quot;monospace&quot;,</span> <span class="pre">fontsize=10)</span></code></p>
<p>Chú thích có thể vẽ cả văn bản và mũi tên được sắp xếp phù hợp. Ví dụ, hãy vẽ đồ thị giá đóng cửa của chỉ số S&amp;P 500 kể từ năm 2007 (lấy từ Yahoo! Finance) và chú thích nó với một số ngày quan trọng từ cuộc khủng hoảng tài chính 2008–2009. Bạn có thể chạy ví dụ mã này trong một ô duy nhất trong Jupyter notebook. Xem <em>Các ngày quan trọng trong cuộc khủng hoảng tài chính 2008–2009</em> cho kết quả:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="c1"># Create spx.csv file for the example</span>
<span class="n">spx_csv_content</span> <span class="o">=</span> <span class="s2">&quot;date,SPX</span><span class="se">\n</span><span class="s2">2003-01-02,909.03</span><span class="se">\n</span><span class="s2">2007-05-04,1499.26</span><span class="se">\n</span><span class="s2">2007-10-11,1554.41</span><span class="se">\n</span><span class="s2">2008-03-12,1290.35</span><span class="se">\n</span><span class="s2">2008-09-15,1172.22</span><span class="se">\n</span><span class="s2">2010-12-31,1257.64</span><span class="se">\n</span><span class="s2">2011-01-03,1271.87&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;spx.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">spx_csv_content</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="c1"># Tăng kích thước để dễ nhìn hơn</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;spx.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">spx</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;SPX&quot;</span><span class="p">]</span>

<span class="n">spx</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>

<span class="n">crisis_data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="s2">&quot;Peak of bull market&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="s2">&quot;Bear Stearns Fails&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="s2">&quot;Lehman Bankruptcy&quot;</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">date</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">crisis_data</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">spx</span><span class="o">.</span><span class="n">asof</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">+</span> <span class="mi">75</span><span class="p">),</span>
                <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">spx</span><span class="o">.</span><span class="n">asof</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">+</span> <span class="mi">225</span><span class="p">),</span>
                <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">headwidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                <span class="n">headlength</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
                <span class="n">horizontalalignment</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="n">verticalalignment</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>

<span class="c1"># Zoom in on 2007-2010</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="s2">&quot;1/1/2007&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2011&quot;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">600</span><span class="p">,</span> <span class="mi">1800</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Important dates in the 2008–2009 financial crisis&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Có một vài điểm quan trọng cần làm nổi bật trong đồ thị này. Phương thức <code class="docutils literal notranslate"><span class="pre">ax.annotate</span></code> có thể vẽ các nhãn tại các tọa độ x và y được chỉ định. Chúng ta sử dụng các phương thức <code class="docutils literal notranslate"><span class="pre">set_xlim</span></code> và <code class="docutils literal notranslate"><span class="pre">set_ylim</span></code> để đặt thủ công các ranh giới bắt đầu và kết thúc cho đồ thị thay vì sử dụng mặc định của matplotlib. Cuối cùng, <code class="docutils literal notranslate"><span class="pre">ax.set_title</span></code> thêm một tiêu đề chính cho đồ thị.</p>
<p>Xem thư viện matplotlib trực tuyến để biết nhiều ví dụ chú thích khác để học hỏi.</p>
<p>Việc vẽ các hình dạng đòi hỏi sự cẩn thận hơn. matplotlib có các đối tượng đại diện cho nhiều hình dạng phổ biến, được gọi là các bản vá (patches). Một số trong số này, như <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> và <code class="docutils literal notranslate"><span class="pre">Circle</span></code>, được tìm thấy trong <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code>, nhưng bộ đầy đủ nằm trong <code class="docutils literal notranslate"><span class="pre">matplotlib.patches</span></code>.</p>
<p>Để thêm một hình dạng vào đồ thị, bạn tạo đối tượng bản vá và thêm nó vào một subplot <code class="docutils literal notranslate"><span class="pre">ax</span></code> bằng cách truyền bản vá cho <code class="docutils literal notranslate"><span class="pre">ax.add_patch</span></code> (xem <em>Trực quan hóa dữ liệu bao gồm ba bản vá khác nhau</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">rect</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">),</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Circle</span><span class="p">((</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span> <span class="mf">0.15</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">pgon</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Polygon</span><span class="p">([[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">]],</span>
                   <span class="n">color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">pgon</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Nếu bạn xem xét việc triển khai nhiều loại đồ thị quen thuộc, bạn sẽ thấy rằng chúng được lắp ráp từ các bản vá.</p>
</section>
<section id="saving-plots-to-file-luu-do-thi-ra-tep">
<h3>Saving Plots to File (Lưu đồ thị ra tệp)<a class="headerlink" href="#saving-plots-to-file-luu-do-thi-ra-tep" title="Link to this heading">#</a></h3>
<p>Bạn có thể lưu hình đang hoạt động vào tệp bằng phương thức instance <code class="docutils literal notranslate"><span class="pre">savefig</span></code> của đối tượng hình. Ví dụ, để lưu phiên bản SVG của một hình, bạn chỉ cần nhập:</p>
<p><code class="docutils literal notranslate"><span class="pre">fig.savefig(&quot;figpath.svg&quot;)</span></code></p>
<p>Loại tệp được suy ra từ phần mở rộng của tệp. Vì vậy, nếu bạn sử dụng <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> thay vào đó, bạn sẽ nhận được một tệp PDF. Một tùy chọn quan trọng mà tôi thường xuyên sử dụng để xuất bản đồ họa là <code class="docutils literal notranslate"><span class="pre">dpi</span></code>, kiểm soát độ phân giải điểm trên mỗi inch. Để có được cùng một đồ thị dưới dạng PNG ở 400 DPI, bạn sẽ làm:</p>
<p><code class="docutils literal notranslate"><span class="pre">fig.savefig(&quot;figpath.png&quot;,</span> <span class="pre">dpi=400)</span></code></p>
<p>Xem <em>Bảng 9.2</em> để biết danh sách một số tùy chọn khác cho <code class="docutils literal notranslate"><span class="pre">savefig</span></code>. Để có danh sách đầy đủ, hãy tham khảo docstring trong IPython hoặc Jupyter.</p>
<p><strong>Bảng 9.2: Một số tùy chọn fig.savefig</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Đối số</p></th>
<th class="head"><p>Mô tả</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fname</span></code></p></td>
<td><p>Chuỗi chứa đường dẫn tệp hoặc đối tượng giống tệp Python. Định dạng hình được suy ra từ phần mở rộng của tệp (ví dụ: <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> cho PDF hoặc <code class="docutils literal notranslate"><span class="pre">.png</span></code> cho PNG).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dpi</span></code></p></td>
<td><p>Độ phân giải của hình tính bằng điểm trên mỗi inch; mặc định là 100 trong IPython hoặc 72 trong Jupyter nhưng có thể được cấu hình.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">facecolor</span></code>, <code class="docutils literal notranslate"><span class="pre">edgecolor</span></code></p></td>
<td><p>Màu của nền hình bên ngoài các subplot; <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> (trắng), theo mặc định.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td><p>Định dạng tệp rõ ràng để sử dụng (<code class="docutils literal notranslate"><span class="pre">&quot;png&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;pdf&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;svg&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ps&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;eps&quot;</span></code>, …).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ví dụ lưu file, không tạo hình ảnh trực tiếp trong notebook output</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;dashed&quot;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">);</span>
<span class="c1"># fig.savefig(&quot;figpath.svg&quot;) </span>
<span class="c1"># fig.savefig(&quot;figpath.png&quot;, dpi=400)</span>
<span class="c1"># Bỏ comment các dòng trên để thực sự lưu file</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="matplotlib-configuration-cau-hinh-matplotlib">
<h3>matplotlib Configuration (Cấu hình matplotlib)<a class="headerlink" href="#matplotlib-configuration-cau-hinh-matplotlib" title="Link to this heading">#</a></h3>
<p>matplotlib đi kèm với các lược đồ màu và các giá trị mặc định chủ yếu hướng đến việc chuẩn bị các hình cho việc xuất bản. May mắn thay, gần như tất cả các hành vi mặc định đều có thể được tùy chỉnh thông qua các tham số toàn cục chi phối kích thước hình, khoảng cách subplot, màu sắc, kích thước phông chữ, kiểu lưới, v.v. Một cách để sửa đổi cấu hình theo chương trình từ Python là sử dụng phương thức <code class="docutils literal notranslate"><span class="pre">rc</span></code>; ví dụ, để đặt kích thước hình mặc định toàn cục là 10 × 10, bạn có thể nhập:</p>
<p><code class="docutils literal notranslate"><span class="pre">plt.rc(&quot;figure&quot;,</span> <span class="pre">figsize=(10,</span> <span class="pre">10))</span></code></p>
<p>Tất cả các cài đặt cấu hình hiện tại được tìm thấy trong từ điển <code class="docutils literal notranslate"><span class="pre">plt.rcParams</span></code>, và chúng có thể được khôi phục về giá trị mặc định bằng cách gọi hàm <code class="docutils literal notranslate"><span class="pre">plt.rcdefaults()</span></code>.</p>
<p>Đối số đầu tiên cho <code class="docutils literal notranslate"><span class="pre">rc</span></code> là thành phần bạn muốn tùy chỉnh, chẳng hạn như <code class="docutils literal notranslate"><span class="pre">&quot;figure&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;axes&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;xtick&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ytick&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;grid&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;legend&quot;</span></code>, hoặc nhiều thành phần khác. Sau đó có thể là một chuỗi các đối số từ khóa cho biết các tham số mới. Một cách thuận tiện để viết các tùy chọn trong chương trình của bạn là dưới dạng một từ điển:</p>
<p><code class="docutils literal notranslate"><span class="pre">plt.rc(&quot;font&quot;,</span> <span class="pre">family=&quot;monospace&quot;,</span> <span class="pre">weight=&quot;bold&quot;,</span> <span class="pre">size=8)</span></code></p>
<p>Để tùy chỉnh rộng hơn và xem danh sách tất cả các tùy chọn, matplotlib đi kèm với một tệp cấu hình <code class="docutils literal notranslate"><span class="pre">matplotlibrc</span></code> trong thư mục <code class="docutils literal notranslate"><span class="pre">matplotlib/mpl-data</span></code>. Nếu bạn tùy chỉnh tệp này và đặt nó trong thư mục chính của mình với tên <code class="docutils literal notranslate"><span class="pre">.matplotlibrc</span></code>, nó sẽ được tải mỗi khi bạn sử dụng matplotlib.</p>
<p>Như chúng ta sẽ thấy trong phần tiếp theo, gói seaborn có một số chủ đề hoặc kiểu đồ thị tích hợp sẵn sử dụng hệ thống cấu hình của matplotlib bên trong.</p>
</section>
</section>
<section id="ve-do-thi-voi-pandas-va-seaborn">
<h2>9.2 Vẽ đồ thị với pandas và seaborn<a class="headerlink" href="#ve-do-thi-voi-pandas-va-seaborn" title="Link to this heading">#</a></h2>
<p>matplotlib có thể là một công cụ ở mức độ khá thấp. Bạn lắp ráp một đồ thị từ các thành phần cơ bản của nó: hiển thị dữ liệu (tức là loại đồ thị: đường, cột, hộp, phân tán, đường đồng mức, v.v.), chú giải, tiêu đề, nhãn vạch chia và các chú thích khác.</p>
<p>Trong pandas, chúng ta có thể có nhiều cột dữ liệu, cùng với các nhãn hàng và cột. Bản thân pandas có các phương thức tích hợp sẵn giúp đơn giản hóa việc tạo hình trực quan từ các đối tượng DataFrame và Series. Một thư viện khác là seaborn, một thư viện đồ họa thống kê cấp cao được xây dựng trên matplotlib. seaborn đơn giản hóa việc tạo nhiều loại hình trực quan phổ biến.</p>
<section id="line-plots-do-thi-duong">
<h3>Line Plots (Đồ thị đường)<a class="headerlink" href="#line-plots-do-thi-duong" title="Link to this heading">#</a></h3>
<p>Series và DataFrame có một thuộc tính <code class="docutils literal notranslate"><span class="pre">plot</span></code> để tạo một số loại đồ thị cơ bản. Theo mặc định, <code class="docutils literal notranslate"><span class="pre">plot()</span></code> tạo đồ thị đường (xem <em>Đồ thị Series đơn giản</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(),</span> <span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">s</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Chỉ mục của đối tượng Series được truyền cho matplotlib để vẽ trên trục x, mặc dù bạn có thể vô hiệu hóa điều này bằng cách truyền <code class="docutils literal notranslate"><span class="pre">use_index=False</span></code>. Các vạch chia và giới hạn trục x có thể được điều chỉnh bằng các tùy chọn <code class="docutils literal notranslate"><span class="pre">xticks</span></code> và <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, và trục y tương ứng với <code class="docutils literal notranslate"><span class="pre">yticks</span></code> và <code class="docutils literal notranslate"><span class="pre">ylim</span></code>. Xem <em>Bảng 9.3</em> để biết danh sách một phần các tùy chọn <code class="docutils literal notranslate"><span class="pre">plot</span></code>. Tôi sẽ bình luận thêm về một vài trong số chúng trong suốt phần này và để lại phần còn lại cho bạn khám phá.</p>
<p><strong>Bảng 9.3: Các đối số phương thức Series.plot</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Đối số</p></th>
<th class="head"><p>Mô tả</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">label</span></code></p></td>
<td><p>Nhãn cho chú giải đồ thị</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ax</span></code></p></td>
<td><p>Đối tượng subplot matplotlib để vẽ trên đó; nếu không có gì được truyền, sử dụng subplot matplotlib đang hoạt động</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">style</span></code></p></td>
<td><p>Chuỗi kiểu, như <code class="docutils literal notranslate"><span class="pre">&quot;ko--&quot;</span></code>, được truyền cho matplotlib</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code></p></td>
<td><p>Độ mờ của phần tô màu đồ thị (từ 0 đến 1)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kind</span></code></p></td>
<td><p>Có thể là <code class="docutils literal notranslate"><span class="pre">&quot;area&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bar&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;barh&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;density&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;hist&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;kde&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;line&quot;</span></code>, hoặc <code class="docutils literal notranslate"><span class="pre">&quot;pie&quot;</span></code>; mặc định là <code class="docutils literal notranslate"><span class="pre">&quot;line&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">figsize</span></code></p></td>
<td><p>Kích thước của đối tượng hình để tạo</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">logx</span></code></p></td>
<td><p>Truyền <code class="docutils literal notranslate"><span class="pre">True</span></code> để chia tỷ lệ logarit trên trục x; truyền <code class="docutils literal notranslate"><span class="pre">&quot;sym&quot;</span></code> cho logarit đối xứng cho phép các giá trị âm</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">logy</span></code></p></td>
<td><p>Truyền <code class="docutils literal notranslate"><span class="pre">True</span></code> để chia tỷ lệ logarit trên trục y; truyền <code class="docutils literal notranslate"><span class="pre">&quot;sym&quot;</span></code> cho logarit đối xứng cho phép các giá trị âm</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">title</span></code></p></td>
<td><p>Tiêu đề để sử dụng cho đồ thị</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_index</span></code></p></td>
<td><p>Sử dụng chỉ mục đối tượng cho các nhãn vạch chia</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rot</span></code></p></td>
<td><p>Xoay các nhãn vạch chia (0 đến 360)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xticks</span></code></p></td>
<td><p>Các giá trị để sử dụng cho các vạch chia trục x</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">yticks</span></code></p></td>
<td><p>Các giá trị để sử dụng cho các vạch chia trục y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xlim</span></code></p></td>
<td><p>Giới hạn trục x (ví dụ: <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">10]</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ylim</span></code></p></td>
<td><p>Giới hạn trục y</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grid</span></code></p></td>
<td><p>Hiển thị lưới trục (tắt theo mặc định)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Hầu hết các phương thức vẽ đồ thị của pandas đều chấp nhận một tham số <code class="docutils literal notranslate"><span class="pre">ax</span></code> tùy chọn, có thể là một đối tượng subplot matplotlib. Điều này mang lại cho bạn sự linh hoạt hơn trong việc bố trí các subplot trong một bố cục lưới.</p>
<p>Phương thức <code class="docutils literal notranslate"><span class="pre">plot</span></code> của DataFrame vẽ mỗi cột của nó dưới dạng một đường khác nhau trên cùng một subplot, tự động tạo chú giải (xem <em>Đồ thị DataFrame đơn giản</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">((</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">],</span>
                  <span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;grayscale&#39;</span><span class="p">)</span> <span class="c1"># Sử dụng style grayscale như trong sách</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Lưu ý</strong></p>
<p>Ở đây tôi đã sử dụng <code class="docutils literal notranslate"><span class="pre">plt.style.use('grayscale')</span></code> để chuyển sang một lược đồ màu phù hợp hơn cho việc xuất bản đen trắng, vì một số độc giả sẽ không thể xem được các đồ thị đầy đủ màu sắc.</p>
<p>Thuộc tính <code class="docutils literal notranslate"><span class="pre">plot</span></code> chứa một “họ” các phương thức cho các loại đồ thị khác nhau. Ví dụ, <code class="docutils literal notranslate"><span class="pre">df.plot()</span></code> tương đương với <code class="docutils literal notranslate"><span class="pre">df.plot.line()</span></code>. Chúng ta sẽ khám phá một số phương thức này tiếp theo.</p>
<p><strong>Lưu ý</strong></p>
<p>Các đối số từ khóa bổ sung cho <code class="docutils literal notranslate"><span class="pre">plot</span></code> được truyền qua hàm vẽ đồ thị matplotlib tương ứng, vì vậy bạn có thể tùy chỉnh thêm các đồ thị này bằng cách tìm hiểu thêm về API matplotlib.</p>
<p>DataFrame có một số tùy chọn cho phép một số linh hoạt về cách xử lý các cột, ví dụ, có vẽ tất cả chúng trên cùng một subplot hay tạo các subplot riêng biệt. Xem <em>Bảng 9.4</em> để biết thêm về những điều này.</p>
<p><strong>Bảng 9.4: Các đối số plot cụ thể của DataFrame</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Đối số</p></th>
<th class="head"><p>Mô tả</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subplots</span></code></p></td>
<td><p>Vẽ mỗi cột DataFrame trong một subplot riêng biệt</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">layouts</span></code></p></td>
<td><p>Tuple 2 chiều (hàng, cột) cung cấp bố cục của các subplot</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sharex</span></code></p></td>
<td><p>Nếu <code class="docutils literal notranslate"><span class="pre">subplots=True</span></code>, chia sẻ cùng một trục x, liên kết các vạch chia và giới hạn</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sharey</span></code></p></td>
<td><p>Nếu <code class="docutils literal notranslate"><span class="pre">subplots=True</span></code>, chia sẻ cùng một trục y</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">legend</span></code></p></td>
<td><p>Thêm chú giải subplot (Mặc định là <code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sort_columns</span></code></p></td>
<td><p>Vẽ các cột theo thứ tự bảng chữ cái; theo mặc định sử dụng thứ tự cột hiện có</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Lưu ý</strong></p>
<p>Để vẽ đồ thị chuỗi thời gian, xem Chương 11: Chuỗi thời gian.</p>
</section>
<section id="bar-plots-do-thi-cot">
<h3>Bar Plots (Đồ thị cột)<a class="headerlink" href="#bar-plots-do-thi-cot" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">plot.bar()</span></code> và <code class="docutils literal notranslate"><span class="pre">plot.barh()</span></code> tạo các đồ thị cột dọc và ngang, tương ứng. Trong trường hợp này, chỉ mục Series hoặc DataFrame sẽ được sử dụng làm các vạch chia x (<code class="docutils literal notranslate"><span class="pre">bar</span></code>) hoặc y (<code class="docutils literal notranslate"><span class="pre">barh</span></code>) (xem <em>Đồ thị cột ngang và dọc</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;abcdefghijklmnop&quot;</span><span class="p">))</span> <span class="c1"># Sửa lỗi typo &#39;p&#39; cuối</span>
<span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span> <span class="c1"># Để các subplot không bị chồng chéo</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Với một DataFrame, các đồ thị cột nhóm các giá trị trong mỗi hàng thành các cột, đặt cạnh nhau, cho mỗi giá trị. Xem <em>Đồ thị cột DataFrame</em>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
                  <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="s2">&quot;five&quot;</span><span class="p">,</span> <span class="s2">&quot;six&quot;</span><span class="p">],</span>
                  <span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Genus&quot;</span><span class="p">))</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Lưu ý rằng tên “Genus” trên các cột của DataFrame được sử dụng để đặt tiêu đề cho chú giải.</p>
<p>Chúng ta tạo các đồ thị cột xếp chồng từ một DataFrame bằng cách truyền <code class="docutils literal notranslate"><span class="pre">stacked=True</span></code>, dẫn đến giá trị trong mỗi hàng được xếp chồng lên nhau theo chiều ngang (xem <em>Đồ thị cột xếp chồng DataFrame</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="c1"># Tạo lại df vì cell trước có thể chạy độc lập</span>
                  <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="s2">&quot;three&quot;</span><span class="p">,</span> <span class="s2">&quot;four&quot;</span><span class="p">,</span> <span class="s2">&quot;five&quot;</span><span class="p">,</span> <span class="s2">&quot;six&quot;</span><span class="p">],</span>
                  <span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Genus&quot;</span><span class="p">))</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Lưu ý</strong></p>
<p>Một công thức hữu ích cho các đồ thị cột là trực quan hóa tần suất giá trị của một Series bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">value_counts</span></code>: <code class="docutils literal notranslate"><span class="pre">s.value_counts().plot.bar()</span></code>.</p>
<p>Hãy xem một ví dụ về tập dữ liệu tiền boa nhà hàng. Giả sử chúng ta muốn tạo một đồ thị cột xếp chồng hiển thị tỷ lệ phần trăm các điểm dữ liệu cho mỗi quy mô bữa tiệc cho mỗi ngày. Tôi tải dữ liệu bằng <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> và tạo một bảng chéo theo ngày và quy mô bữa tiệc. Hàm <code class="docutils literal notranslate"><span class="pre">pandas.crosstab</span></code> là một cách thuận tiện để tính toán một bảng tần suất đơn giản từ hai cột DataFrame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create tips.csv file for the example</span>
<span class="n">tips_csv_content</span> <span class="o">=</span> <span class="s2">&quot;total_bill,tip,smoker,day,time,size</span><span class="se">\n</span><span class="s2">16.99,1.01,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">10.34,1.66,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">21.01,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">23.68,3.31,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">24.59,3.61,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">25.29,4.71,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">8.77,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">26.88,3.12,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">15.04,1.96,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">14.78,3.22,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">10.27,1.73,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">35.26,5.0,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">15.42,1.58,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">18.43,3.0,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">14.83,3.02,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">21.58,3.92,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">10.33,1.67,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">16.29,3.71,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">16.97,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">20.65,3.35,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">17.92,4.08,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">20.29,2.75,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">15.77,2.23,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">39.42,7.58,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">19.82,3.18,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">17.81,2.34,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">13.37,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">12.69,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">21.7,4.3,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">19.65,3.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">9.55,1.45,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">18.35,2.5,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">15.06,3.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">20.69,2.45,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">17.78,3.27,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">24.06,2.94,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">16.31,2.0,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">16.93,3.07,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">18.69,2.31,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">31.27,5.0,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">16.04,2.24,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">17.46,2.54,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">13.94,3.06,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">9.68,1.32,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">30.4,5.6,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">18.29,3.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">22.23,5.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">32.4,6.0,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">28.55,2.05,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">18.04,3.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">12.54,2.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">10.29,2.6,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">34.83,5.17,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">11.59,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">7.74,1.44,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">30.07,4.3,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">12.02,1.97,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">20.0,2.08,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">17.07,3.0,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">10.51,1.25,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">17.51,3.0,Yes,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">24.55,2.0,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">19.77,2.0,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">29.85,5.14,No,Sun,Dinner,5</span><span class="se">\n</span><span class="s2">48.17,5.0,No,Sun,Dinner,6</span><span class="se">\n</span><span class="s2">25.0,3.75,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">13.81,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">11.02,1.98,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">18.29,3.76,Yes,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">16.47,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">26.59,3.41,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">38.73,3.0,Yes,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">24.27,2.03,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">12.76,2.23,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">30.06,2.0,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">25.89,5.16,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">48.33,9.0,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">13.03,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">18.29,3.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">22.12,2.88,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">24.01,2.0,Yes,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">15.69,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">11.61,3.39,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">10.77,1.47,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">15.53,3.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">10.07,1.83,No,Sat,Dinner,1</span><span class="se">\n</span><span class="s2">12.6,1.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">32.83,1.17,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">35.83,4.67,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">29.03,5.92,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">27.18,2.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">22.67,2.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">17.82,1.75,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">18.78,3.0,No,Thur,Dinner,2</span><span class="se">\n</span><span class="s2">14.26,2.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">15.95,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">12.48,2.52,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">29.8,4.2,No,Thur,Lunch,6</span><span class="se">\n</span><span class="s2">8.51,1.25,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.33,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.15,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">16.27,2.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.09,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">20.45,3.0,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">13.28,2.72,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">22.76,3.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">17.29,2.71,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">13.0,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.51,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">18.71,4.0,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">12.74,2.01,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.0,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">16.4,2.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">20.53,4.0,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">16.47,3.23,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">26.34,3.0,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">23.33,5.65,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">11.02,1.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.48,2.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">9.78,1.73,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">7.51,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.65,1.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">12.43,1.8,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">24.08,2.92,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">11.69,2.31,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.42,1.58,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.26,2.74,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">15.79,3.21,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">8.58,1.92,Yes,Thur,Lunch,1</span><span class="se">\n</span><span class="s2">13.42,3.08,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">16.21,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.94,2.56,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">9.68,1.32,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.58,1.42,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.63,2.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">50.81,10.0,Yes,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">15.81,3.16,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">7.25,1.0,No,Sat,Dinner,1</span><span class="se">\n</span><span class="s2">12.6,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">11.35,2.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">15.38,3.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">44.3,2.5,Yes,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">22.42,3.48,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">20.92,4.08,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">15.77,2.23,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">10.27,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">12.03,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">21.01,3.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">12.46,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">34.3,3.5,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">22.82,2.18,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">28.97,3.0,Yes,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">22.49,3.5,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">5.75,1.0,Yes,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">16.32,4.3,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">22.75,3.25,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">40.17,4.73,Yes,Fri,Dinner,4</span><span class="se">\n</span><span class="s2">27.28,4.0,Yes,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">12.03,2.97,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">21.01,3.0,Yes,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">12.43,1.8,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">11.35,2.5,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">13.27,2.5,No,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">12.16,2.2,Yes,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">28.17,6.5,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">12.9,1.1,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">7.25,5.15,Yes,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">31.85,3.18,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">16.82,4.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">32.9,3.11,Yes,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">17.89,2.0,Yes,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">14.48,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">9.6,4.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">34.63,3.55,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">34.65,3.68,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">23.33,2.67,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">25.28,5.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">10.51,1.25,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">14.07,2.5,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">13.13,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">17.26,2.74,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">25.56,4.34,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">19.49,3.51,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">38.01,3.0,Yes,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">23.95,2.55,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">25.71,4.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">17.31,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">29.93,5.07,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">10.65,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">20.9,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">30.46,2.0,No,Sun,Dinner,5</span><span class="se">\n</span><span class="s2">18.15,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">23.1,4.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">15.69,3.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">19.81,4.19,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">28.44,2.56,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">15.48,2.02,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">16.58,4.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">7.56,1.44,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.34,2.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">43.11,5.0,Yes,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">19.0,3.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.0,2.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.52,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">11.38,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">22.82,2.18,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">19.08,1.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">20.27,2.83,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">11.17,1.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">12.26,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">18.26,3.25,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">8.52,1.48,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">24.01,2.0,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">15.43,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.73,2.2,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.51,1.49,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">12.02,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">17.07,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">16.43,2.3,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">20.23,2.01,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">11.25,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">21.16,3.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">13.16,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">27.05,5.0,No,Thur,Lunch,6</span><span class="se">\n</span><span class="s2">16.45,2.47,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">20.59,3.41,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">16.66,3.4,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">12.86,2.12,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">17.47,3.5,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">30.08,4.0,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">8.35,1.5,No,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">18.64,1.36,No,Fri,Lunch,3</span><span class="se">\n</span><span class="s2">11.87,1.63,No,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">9.78,2.23,No,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">12.13,1.87,No,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">10.09,2.41,No,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">13.42,1.58,Yes,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">16.27,2.5,Yes,Fri,Lunch,2</span><span class="se">\n</span><span class="s2">27.2,4.0,No,Thur,Lunch,5</span><span class="se">\n</span><span class="s2">12.76,2.23,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">10.07,1.83,No,Thur,Lunch,1</span><span class="se">\n</span><span class="s2">3.07,1.0,Yes,Sat,Dinner,1</span><span class="se">\n</span><span class="s2">20.29,3.21,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">13.81,2.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">11.24,1.76,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">45.35,3.5,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">23.17,6.5,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">31.71,4.5,No,Sun,Dinner,4</span><span class="se">\n</span><span class="s2">28.15,3.0,No,Sun,Dinner,5</span><span class="se">\n</span><span class="s2">11.59,2.41,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">7.25,1.0,No,Sun,Dinner,1</span><span class="se">\n</span><span class="s2">38.07,4.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">26.41,1.5,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">20.76,2.24,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">31.21,4.0,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">16.31,2.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">22.12,3.13,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">24.06,3.19,No,Sun,Dinner,3</span><span class="se">\n</span><span class="s2">48.27,6.73,No,Sat,Dinner,4</span><span class="se">\n</span><span class="s2">25.0,3.0,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">13.39,2.61,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">16.49,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">21.5,3.5,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">12.66,2.5,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">16.0,3.0,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">29.8,4.29,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">9.94,1.56,No,Sun,Dinner,2</span><span class="se">\n</span><span class="s2">19.44,3.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">32.68,5.0,Yes,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">15.98,2.03,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">34.81,5.2,No,Thur,Lunch,4</span><span class="se">\n</span><span class="s2">13.03,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">18.28,4.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">24.71,5.85,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">21.16,3.09,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">28.97,3.0,Yes,Fri,Dinner,2</span><span class="se">\n</span><span class="s2">17.29,3.21,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">19.49,3.01,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">14.16,2.0,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">18.05,2.0,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">20.08,3.15,No,Thur,Lunch,3</span><span class="se">\n</span><span class="s2">11.45,2.55,No,Thur,Lunch,2</span><span class="se">\n</span><span class="s2">29.03,5.92,No,Sat,Dinner,3</span><span class="se">\n</span><span class="s2">27.18,2.0,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">22.67,2.0,Yes,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">17.82,1.75,No,Sat,Dinner,2</span><span class="se">\n</span><span class="s2">18.78,3.0,No,Thur,Dinner,2</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">tips_csv_content</span><span class="p">)</span>

<span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span>
<span class="n">party_counts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">],</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">])</span>
<span class="n">party_counts</span> <span class="o">=</span> <span class="n">party_counts</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Thur&quot;</span><span class="p">,</span> <span class="s2">&quot;Fri&quot;</span><span class="p">,</span> <span class="s2">&quot;Sat&quot;</span><span class="p">,</span> <span class="s2">&quot;Sun&quot;</span><span class="p">])</span>
<span class="n">party_counts</span>
</pre></div>
</div>
</div>
</div>
<p>Vì có không nhiều bữa tiệc một và sáu người, tôi loại bỏ chúng ở đây:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tiếp tục từ cell trước</span>
<span class="n">party_counts</span> <span class="o">=</span> <span class="n">party_counts</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="n">party_counts</span>
</pre></div>
</div>
</div>
</div>
<p>Sau đó, chuẩn hóa để mỗi hàng có tổng bằng 1 và tạo đồ thị (xem <em>Phần trăm các bữa tiệc theo quy mô trong mỗi ngày</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tiếp tục từ cell trước</span>
<span class="n">party_pcts</span> <span class="o">=</span> <span class="n">party_counts</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">party_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;columns&quot;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
<span class="n">party_pcts</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Vì vậy, bạn có thể thấy rằng quy mô bữa tiệc dường như tăng vào cuối tuần trong tập dữ liệu này.</p>
<p>Với dữ liệu yêu cầu tổng hợp hoặc tóm tắt trước khi tạo đồ thị, việc sử dụng gói seaborn có thể làm cho mọi thứ đơn giản hơn nhiều (cài đặt nó bằng <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">seaborn</span></code>). Hãy xem xét tỷ lệ phần trăm tiền boa theo ngày với seaborn (xem <em>Tỷ lệ phần trăm tiền boa theo ngày với các thanh lỗi</em> cho đồ thị kết quả):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Các hàm vẽ đồ thị trong seaborn nhận một đối số <code class="docutils literal notranslate"><span class="pre">data</span></code>, có thể là một DataFrame pandas. Các đối số khác tham chiếu đến tên cột. Bởi vì có nhiều quan sát cho mỗi giá trị trong <code class="docutils literal notranslate"><span class="pre">day</span></code>, các thanh là giá trị trung bình của <code class="docutils literal notranslate"><span class="pre">tip_pct</span></code>. Các đường màu đen được vẽ trên các thanh biểu thị khoảng tin cậy 95% (điều này có thể được cấu hình thông qua các đối số tùy chọn).</p>
<p><code class="docutils literal notranslate"><span class="pre">seaborn.barplot</span></code> có một tùy chọn <code class="docutils literal notranslate"><span class="pre">hue</span></code> cho phép chúng ta chia nhỏ theo một giá trị phân loại bổ sung (xem <em>Tỷ lệ phần trăm tiền boa theo ngày và thời gian</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;h&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Lưu ý rằng seaborn đã tự động thay đổi tính thẩm mỹ của đồ thị: bảng màu mặc định, nền đồ thị và màu đường lưới. Bạn có thể chuyển đổi giữa các giao diện đồ thị khác nhau bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">seaborn.set_style</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
<span class="c1"># sns.set_palette(&quot;Greys_r&quot;) # Dòng này được đề cập trong text nhưng không có hình minh họa cụ thể sau khi chạy</span>
<span class="c1"># Để thấy hiệu ứng, bạn có thể chạy lại một trong các đồ thị seaborn ở trên sau khi chạy dòng này.</span>
</pre></div>
</div>
</div>
</div>
<p>Khi tạo đồ thị cho phương tiện in đen trắng, bạn có thể thấy hữu ích khi đặt bảng màu thang độ xám, như sau:</p>
<p><code class="docutils literal notranslate"><span class="pre">sns.set_palette(&quot;Greys_r&quot;)</span></code></p>
</section>
<section id="histograms-bieu-do-tan-suat-va-density-plots-do-thi-mat-do">
<h3>Histograms (Biểu đồ tần suất) và Density Plots (Đồ thị mật độ)<a class="headerlink" href="#histograms-bieu-do-tan-suat-va-density-plots-do-thi-mat-do" title="Link to this heading">#</a></h3>
<p>Biểu đồ tần suất là một loại đồ thị cột hiển thị tần suất giá trị một cách rời rạc. Các điểm dữ liệu được chia thành các thùng rời rạc, cách đều nhau và số lượng điểm dữ liệu trong mỗi thùng được vẽ. Sử dụng dữ liệu tiền boa từ trước, chúng ta có thể tạo biểu đồ tần suất tỷ lệ phần trăm tiền boa của tổng hóa đơn bằng phương thức <code class="docutils literal notranslate"><span class="pre">plot.hist</span></code> trên Series (xem <em>Biểu đồ tần suất tỷ lệ phần trăm tiền boa</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Một loại đồ thị liên quan là đồ thị mật độ, được hình thành bằng cách tính toán ước tính của một phân phối xác suất liên tục có thể đã tạo ra dữ liệu quan sát được. Quy trình thông thường là xấp xỉ phân phối này dưới dạng hỗn hợp của các “hạt nhân”—tức là các phân phối đơn giản hơn như phân phối chuẩn. Do đó, các đồ thị mật độ còn được gọi là đồ thị ước tính mật độ hạt nhân (KDE). Sử dụng <code class="docutils literal notranslate"><span class="pre">plot.density</span></code> tạo một đồ thị mật độ bằng cách sử dụng ước tính hỗn hợp các phân phối chuẩn thông thường (xem <em>Đồ thị mật độ tỷ lệ phần trăm tiền boa</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1"># Lưu ý: Sách đề cập `conda install scipy` nếu chưa có, nhưng code này không trực tiếp dùng SciPy (pandas dùng nó ngầm)</span>
</pre></div>
</div>
</div>
</div>
<p>seaborn giúp việc tạo biểu đồ tần suất và đồ thị mật độ trở nên dễ dàng hơn thông qua phương thức <code class="docutils literal notranslate"><span class="pre">histplot</span></code> của nó, có thể vẽ cả biểu đồ tần suất và ước tính mật độ liên tục đồng thời. Ví dụ, hãy xem xét một phân phối hai mode bao gồm các lần rút từ hai phân phối chuẩn tiêu chuẩn khác nhau (xem <em>Biểu đồ tần suất chuẩn hóa của hỗn hợp chuẩn</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comp1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">comp2</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">standard_normal</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">comp1</span><span class="p">,</span> <span class="n">comp2</span><span class="p">]))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="scatter-or-point-plots-do-thi-diem-hoac-phan-tan">
<h3>Scatter or Point Plots (Đồ thị điểm hoặc phân tán)<a class="headerlink" href="#scatter-or-point-plots-do-thi-diem-hoac-phan-tan" title="Link to this heading">#</a></h3>
<p>Đồ thị điểm hoặc đồ thị phân tán có thể là một cách hữu ích để kiểm tra mối quan hệ giữa hai chuỗi dữ liệu một chiều. Ví dụ, ở đây chúng ta tải tập dữ liệu <code class="docutils literal notranslate"><span class="pre">macrodata</span></code> từ dự án <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code>, chọn một vài biến, sau đó tính toán chênh lệch logarit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create macrodata.csv for the example</span>
<span class="n">macro_csv_content</span> <span class="o">=</span> <span class="s2">&quot;year,quarter,realgdp,realcons,realinv,realgovt,realdpi,cpi,m1,tbilrate,unemp,pop,infl,realint</span><span class="se">\n</span><span class="s2">1959,1,2710.349,1707.4,286.898,470.045,1886.9,28.98,139.7,2.82,5.8,177.146,0.00,0.00</span><span class="se">\n</span><span class="s2">1959,2,2778.801,1733.7,310.859,481.301,1919.7,29.15,141.7,3.08,5.1,177.830,2.34,0.74</span><span class="se">\n</span><span class="s2">1959,3,2775.488,1751.8,289.226,491.260,1916.4,29.35,140.5,3.82,5.3,178.657,2.74,1.09</span><span class="se">\n</span><span class="s2">1959,4,2785.204,1753.7,299.356,484.052,1931.3,29.37,140.0,4.33,5.6,179.386,0.27,4.06</span><span class="se">\n</span><span class="s2">1960,1,2847.699,1770.5,311.046,462.199,1955.5,29.54,139.6,3.50,5.2,180.007,2.31,1.19</span><span class="se">\n</span><span class="s2">2008,3,13324.600,9366.0,1990.693,991.551,9838.3,216.889,1474.7,1.17,6.0,305.270,7.71,-6.54</span><span class="se">\n</span><span class="s2">2008,4,13141.920,9256.0,1882.668,1007.223,9920.4,212.174,1576.5,0.12,6.9,305.952,-8.79,8.91</span><span class="se">\n</span><span class="s2">2009,1,12925.410,9209.2,1558.494,996.287,9926.4,212.671,1592.8,0.22,8.1,306.547,0.94,-0.71</span><span class="se">\n</span><span class="s2">2009,2,12901.504,9189.0,1456.678,1023.528,10077.5,214.469,1653.6,0.18,9.2,307.241,3.37,-3.19</span><span class="se">\n</span><span class="s2">2009,3,12990.341,9256.1,1486.398,1044.088,10040.6,216.385,1673.9,0.12,9.6,308.013,3.56,-3.44&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;macrodata.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">macro_csv_content</span><span class="p">)</span>

<span class="n">macro</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;macrodata.csv&quot;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">macro</span><span class="p">[[</span><span class="s2">&quot;cpi&quot;</span><span class="p">,</span> <span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="s2">&quot;tbilrate&quot;</span><span class="p">,</span> <span class="s2">&quot;unemp&quot;</span><span class="p">]]</span>
<span class="n">trans_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">trans_data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Sau đó, chúng ta có thể sử dụng phương thức <code class="docutils literal notranslate"><span class="pre">regplot</span></code> của seaborn, tạo một đồ thị phân tán và khớp một đường hồi quy tuyến tính (xem <em>Đồ thị hồi quy/phân tán seaborn</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tiếp tục từ cell trước</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;m1&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;unemp&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">trans_data</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Changes in log(m1) versus log(unemp)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Trong phân tích dữ liệu khám phá, việc có thể xem tất cả các đồ thị phân tán giữa một nhóm các biến là hữu ích; điều này được gọi là đồ thị cặp hoặc ma trận đồ thị phân tán. Việc tạo một đồ thị như vậy từ đầu là một chút công việc, vì vậy seaborn có một hàm <code class="docutils literal notranslate"><span class="pre">pairplot</span></code> tiện lợi hỗ trợ đặt biểu đồ tần suất hoặc ước tính mật độ của mỗi biến dọc theo đường chéo (xem <em>Ma trận đồ thị cặp của dữ liệu vĩ mô statsmodels</em> cho đồ thị kết quả):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tiếp tục từ cell trước (trans_data đã được định nghĩa)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">trans_data</span><span class="p">,</span> <span class="n">diag_kind</span><span class="o">=</span><span class="s2">&quot;kde&quot;</span><span class="p">,</span> <span class="n">plot_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">})</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Bạn có thể nhận thấy đối số <code class="docutils literal notranslate"><span class="pre">plot_kws</span></code>. Điều này cho phép chúng ta truyền các tùy chọn cấu hình xuống các lệnh gọi vẽ đồ thị riêng lẻ trên các phần tử ngoài đường chéo. Hãy xem docstring <code class="docutils literal notranslate"><span class="pre">seaborn.pairplot</span></code> để biết các tùy chọn cấu hình chi tiết hơn.</p>
</section>
<section id="facet-grids-luoi-da-dien-va-categorical-data-du-lieu-phan-loai">
<h3>Facet Grids (Lưới đa diện) và Categorical Data (Dữ liệu phân loại)<a class="headerlink" href="#facet-grids-luoi-da-dien-va-categorical-data-du-lieu-phan-loai" title="Link to this heading">#</a></h3>
<p>Còn về các tập dữ liệu mà chúng ta có các chiều nhóm bổ sung thì sao? Một cách để trực quan hóa dữ liệu với nhiều biến phân loại là sử dụng lưới đa diện, là một bố cục hai chiều của các đồ thị trong đó dữ liệu được chia trên các đồ thị trên mỗi trục dựa trên các giá trị riêng biệt của một biến nhất định. seaborn có một hàm tích hợp hữu ích <code class="docutils literal notranslate"><span class="pre">catplot</span></code> giúp đơn giản hóa việc tạo nhiều loại đồ thị đa diện được chia theo các biến phân loại (xem <em>Tỷ lệ phần trăm tiền boa theo ngày/thời gian/người hút thuốc</em> cho đồ thị kết quả):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">&quot;smoker&quot;</span><span class="p">,</span>
            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">[</span><span class="n">tips</span><span class="o">.</span><span class="n">tip_pct</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Thay vì nhóm theo <code class="docutils literal notranslate"><span class="pre">&quot;time&quot;</span></code> bằng các màu cột khác nhau trong một facet, chúng ta cũng có thể mở rộng lưới facet bằng cách thêm một hàng cho mỗi giá trị <code class="docutils literal notranslate"><span class="pre">time</span></code> (xem <em>Tỷ lệ phần trăm tiền boa theo ngày được chia theo thời gian/người hút thuốc</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
            <span class="n">col</span><span class="o">=</span><span class="s2">&quot;smoker&quot;</span><span class="p">,</span>
            <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">[</span><span class="n">tips</span><span class="o">.</span><span class="n">tip_pct</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">catplot</span></code> hỗ trợ các loại đồ thị khác có thể hữu ích tùy thuộc vào những gì bạn đang cố gắng hiển thị. Ví dụ, đồ thị hộp (hiển thị trung vị, tứ phân vị và các điểm ngoại lai) có thể là một loại hình trực quan hiệu quả (xem <em>Đồ thị hộp tỷ lệ phần trăm tiền boa theo ngày</em>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tips</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;tips.csv&quot;</span><span class="p">)</span> <span class="c1"># Tải lại dữ liệu gốc tips</span>
<span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="n">tips</span><span class="p">[</span><span class="s2">&quot;total_bill&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">tips</span><span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;box&quot;</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">tips</span><span class="p">[</span><span class="n">tips</span><span class="o">.</span><span class="n">tip_pct</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Bạn có thể tạo các đồ thị lưới facet của riêng mình bằng cách sử dụng lớp <code class="docutils literal notranslate"><span class="pre">seaborn.FacetGrid</span></code> tổng quát hơn. Xem tài liệu seaborn để biết thêm.</p>
</section>
</section>
<section id="cac-cong-cu-truc-quan-hoa-python-khac">
<h2>9.3 Các Công cụ Trực quan hóa Python Khác<a class="headerlink" href="#cac-cong-cu-truc-quan-hoa-python-khac" title="Link to this heading">#</a></h2>
<p>Như thường lệ với mã nguồn mở, có rất nhiều lựa chọn để tạo đồ họa trong Python (quá nhiều để liệt kê). Kể từ năm 2010, nhiều nỗ lực phát triển đã tập trung vào việc tạo đồ họa tương tác để xuất bản trên web. Với các công cụ như Altair, Bokeh và Plotly, giờ đây có thể chỉ định các đồ họa tương tác, động trong Python dành cho việc sử dụng với các trình duyệt web.</p>
<p>Để tạo đồ họa tĩnh cho bản in hoặc web, tôi khuyên bạn nên sử dụng matplotlib và các thư viện được xây dựng trên matplotlib, như pandas và seaborn, cho nhu cầu của bạn. Đối với các yêu cầu trực quan hóa dữ liệu khác, có thể hữu ích khi tìm hiểu cách sử dụng một trong các công cụ có sẵn khác. Tôi khuyến khích bạn khám phá hệ sinh thái khi nó tiếp tục phát triển và đổi mới trong tương lai.</p>
<p>Một cuốn sách tuyệt vời về trực quan hóa dữ liệu là <em>Fundamentals of Data Visualization</em> của Claus O. Wilke (O’Reilly), có sẵn dưới dạng bản in hoặc trên trang web của Claus tại <a class="reference external" href="https://clauswilke.com/dataviz">https://clauswilke.com/dataviz</a>.</p>
</section>
<section id="ket-luan">
<h2>9.4 Kết luận<a class="headerlink" href="#ket-luan" title="Link to this heading">#</a></h2>
<p>Mục tiêu của chương này là giúp bạn làm quen với một số kiến thức cơ bản về trực quan hóa dữ liệu bằng pandas, matplotlib và seaborn. Nếu việc truyền đạt kết quả phân tích dữ liệu một cách trực quan là quan trọng trong công việc của bạn, tôi khuyến khích bạn tìm kiếm các nguồn tài liệu để tìm hiểu thêm về trực quan hóa dữ liệu hiệu quả. Đây là một lĩnh vực nghiên cứu năng động, và bạn có thể thực hành với nhiều tài nguyên học tập tuyệt vời có sẵn trực tuyến và dưới dạng bản in.</p>
<p>Trong chương tiếp theo, chúng ta sẽ chuyển sự chú ý sang tổng hợp dữ liệu và các thao tác nhóm với pandas.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="chapter9-transform.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chương 9: Sắp xếp và biến đổi dữ liệu</p>
      </div>
    </a>
    <a class="right-next"
       href="chapter11-IntroML.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Chương: Tổng quan về xây dựng mô hình trên dữ liệu</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#so-luoc-ve-matplotlib">10.1 Sơ lược về matplotlib</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dieu-chinh-khoang-cach-xung-quanh-cac-subplot">Điều chỉnh khoảng cách xung quanh các subplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#colors-mau-sac-markers-diem-danh-dau-va-line-styles-kieu-duong">Colors (Màu sắc), Markers (Điểm đánh dấu), và Line Styles (Kiểu đường)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ticks-vach-chia-labels-nhan-va-legends-chu-giai">Ticks (Vạch chia), Labels (Nhãn), và Legends (Chú giải)</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dat-tieu-de-nhan-truc-vach-chia-va-nhan-vach-chia">Đặt tiêu đề, nhãn trục, vạch chia và nhãn vạch chia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#them-chu-giai">Thêm chú giải</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#annotations-chu-thich-va-drawing-ve-tren-mot-subplot">Annotations (Chú thích) và Drawing (Vẽ) trên một Subplot</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-plots-to-file-luu-do-thi-ra-tep">Saving Plots to File (Lưu đồ thị ra tệp)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#matplotlib-configuration-cau-hinh-matplotlib">matplotlib Configuration (Cấu hình matplotlib)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ve-do-thi-voi-pandas-va-seaborn">9.2 Vẽ đồ thị với pandas và seaborn</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#line-plots-do-thi-duong">Line Plots (Đồ thị đường)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bar-plots-do-thi-cot">Bar Plots (Đồ thị cột)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#histograms-bieu-do-tan-suat-va-density-plots-do-thi-mat-do">Histograms (Biểu đồ tần suất) và Density Plots (Đồ thị mật độ)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scatter-or-point-plots-do-thi-diem-hoac-phan-tan">Scatter or Point Plots (Đồ thị điểm hoặc phân tán)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#facet-grids-luoi-da-dien-va-categorical-data-du-lieu-phan-loai">Facet Grids (Lưới đa diện) và Categorical Data (Dữ liệu phân loại)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cac-cong-cu-truc-quan-hoa-python-khac">9.3 Các Công cụ Trực quan hóa Python Khác</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ket-luan">9.4 Kết luận</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Trường Công nghệ, Đại học Kinh tế Quốc dân
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>